<h2 class="title">
  <span class="title-text"><span class="icon-title"></span>查看进度</span>
</h2>

<div class="order-info">
  <div class="info-item">
    <div class="info-key">订单编号:</div>
    <div class="info-value">{{orderFlow.orderNo}}</div>
  </div>
  <div class="info-item">
    <div class="info-key">下单时间:</div>
    <div class="info-value">{{orderFlow.orderDate}}</div>
  </div>
  <div class="info-item">
    <div class="info-key">拍摄时间:</div>
    <div class="info-value">{{orderFlow.shootDateStr}}</div>
  </div>
</div>

<div class="steps" *ngFor="let flow of orderFlow.flowNodes;let i = index">
  <div class="step" [ngClass]="{'step-more':i!=0}">
    <div class="step-title"  [ngClass]="{'step-active':flow.status==1}">
      <div class="step-number" [ngClass]="{'step-active':flow.status!=0}">
        <div class="inner-number">{{i+1}}</div>
      </div>
     {{flow.name}}<span class="sub-title">{{flow.beginTime}} 至 {{flow.endTime}} </span>
    </div>
    <div class="step-box" *ngIf="flow.status!=0 && flow.workers.length>0"><!--[ngClass]="{'box-transparent':!flow.isEvaluated}"-->
      <div class="step-item"  *ngFor="let worker of flow.workers;let j = index"><!--[ngClass]="{'step-item':flow.isEvaluated,'rated-item':!flow.isEvaluated}"-->
        <div class="step-key"  >{{worker.roleName}}:</div><!-- [ngClass]="{'step-key':flow.isEvaluated,'rated-key':!flow.isEvaluated}"-->
        <div class="step-value" >{{worker.workerName}}</div><!-- [ngClass]="{'step-value':flow.isEvaluated,'rated-value':!flow.isEvaluated}"-->
        <!--<a href="javascript:;" class="btn-rated" *ngIf="flow.status ==2 && !flow.isEvaluated && !flow.evaluating " (click)="evaluating(flow)">评价</a>-->
        <div class="judge-star judge-active" *ngIf="flow.evaluating">
          <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=1}" (click)="evaluateStar(flow,j,1)"></a>
          <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=2}" (click)="evaluateStar(flow,j,2)"></a>
          <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=3}" (click)="evaluateStar(flow,j,3)"></a>
          <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=4}" (click)="evaluateStar(flow,j,4)"></a>
          <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=5}" (click)="evaluateStar(flow,j,5)"></a>
        </div>
      </div>
      <!--<div style="    position: relative;top: 50%;">-->
      <a href="javascript:;" class="btn-rated" *ngIf="flow.status ==2 && !flow.isEvaluated && !flow.evaluating " (click)="evaluating(flow)">评价</a>
      <!--</div>-->
      <a href="javascript:;" class="btn-open" (click)="showEvaluatedResult(flow)" *ngIf="flow.status==2 &&flow.isEvaluated && !flow.evaluatedResult">
        <span class="btn-open-icon"></span>
      </a>
      <div class="judge" *ngIf="flow.evaluatedResult">
        <div class="judge-line">
          <div class="judge-item" *ngFor="let worker of flow.workers;let i = index">
            <div class="judge-key">{{worker.roleName}} :</div>
            <div class="judge-star">
              <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=1}"></a>
              <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=2}"></a>
              <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=3}"></a>
              <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=4}"></a>
              <a href="javascript:;" class="star" [ngClass]="{'star-active':worker.serviceLevel >=5}"></a>
            </div>
          </div>
          <div class="judge-item" style="display: -webkit-box;margin-top: 3px;" >
            <div class="judge-key">{{flow.workers[0].content}}</div>
          </div>
        </div>
      </div>
      <div *ngIf="flow.evaluating">
        <textarea class="textarea" placeholder="我想说..." name="content" [(ngModel)]="flow.content"></textarea>
        <button  class="btn-submit" type="button" [disabled]="!flow.submit" (click)="saveEvaluate(flow)">提交</button>
      </div>
        <a href="javascript:;" class="btn-open btn-open-up" (click)="hideEvaluatedResult(flow)" *ngIf="flow.evaluatedResult||flow.evaluating">
          <span class="btn-open-icon"></span>
        </a>
    </div>
  </div>

  <tip
    *ngIf="isShowTip"
    (close)="onCloseTip()"
    btnText = '确定'>
    {{message}}
  </tip>
  <!--<div class="step step-more">-->
    <!--<div class="step-title step-active">-->
      <!--<div class="step-number ">-->
        <!--<div class="inner-number">2</div>-->
      <!--</div>-->
      <!--客户选片<span class="sub-title">2016-09-22 至 2016-09-23</span>-->
    <!--</div>-->
    <!--<div class="step-box">-->
      <!--<div class="step-item">-->
        <!--<div class="step-key">拍摄师 :</div>-->
        <!--<div class="step-value">ZAYSTest</div>-->
        <!--<div class="judge-star judge-active">-->
          <!--<a href="javascript:;" class="star star-active"></a>-->
          <!--<a href="javascript:;" class="star"></a>-->
          <!--<a href="javascript:;" class="star"></a>-->
          <!--<a href="javascript:;" class="star"></a>-->
          <!--<a href="javascript:;" class="star"></a>-->
        <!--</div>-->
      <!--</div>-->
      <!--<textarea class="textarea" placeholder="我想说..."></textarea>-->
      <!--<a href="javascript:;" class="btn-submit">提交</a>-->
      <!--<a href="javascript:;" class="btn-open btn-open-up">-->
        <!--<span class="btn-open-icon"></span>-->
      <!--</a>-->
    <!--</div>-->
  <!--</div>-->
  <!--<div class="step step-more">-->
    <!--<div class="step-title">-->
      <!--<div class="step-number ">-->
        <!--<div class="inner-number">3</div>-->
      <!--</div>-->
      <!--客户选片<span class="sub-title">2016-09-22 至 2016-09-23</span>-->
    <!--</div>-->

    <!--<div class="step-box box-transparent">-->
      <!--<div class="rated-item">-->
        <!--<div class="rated-key">客服专员:</div>-->
        <!--<div class="rated-value">刘亦菲</div>-->
        <!--<a href="javascript:;" class="btn-rated">评价</a>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->


</div>



